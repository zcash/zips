<!DOCTYPE html>
<html>
<head>
    <title>ZIP 227: Issuance of Zcash Shielded Assets</title>
    <meta charset="utf-8" />
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js?config=TeX-AMS-MML_HTMLorMML"></script>
<meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="css/style.css"></head>
<body>
    <section>
        <pre>ZIP: 227
Title: Issuance of Zcash Shielded Assets
Owners: Pablo Kogan &lt;pablo@qed-it.com&gt;
        Vivek Arte &lt;vivek@qed-it.com&gt;
        Daira Emma Hopwood &lt;daira@electriccoin.co&gt;
        Jack Grigg &lt;str4d@electriccoin.co&gt;
        Deirdre Connolly &lt;deirdre@zfnd.org&gt;
Credits: Daniel Benarroch
         Aurelien Nicolas
         Teor
Status: Draft
Category: Consensus
Created: 2022-05-01
License: MIT
Discussions-To: &lt;<a href="https://github.com/zcash/zips/issues/618">https://github.com/zcash/zips/issues/618</a>&gt;
Pull-Request: &lt;<a href="https://github.com/zcash/zips/pull/680">https://github.com/zcash/zips/pull/680</a>&gt;</pre>
        <section id="terminology"><h2><span class="section-heading">Terminology</span><span class="section-anchor"> <a rel="bookmark" href="#terminology"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <p>The key word "MUST" in this document is to be interpreted as described in RFC 2119 <a id="footnote-reference-1" class="footnote_reference" href="#rfc2119">1</a>.</p>
            <p>The term "network upgrade" in this document is to be interpreted as described in ZIP 200 <a id="footnote-reference-2" class="footnote_reference" href="#zip-0200">2</a>.</p>
            <p>The term "Orchard" in this document is to be interpreted as described in ZIP 224 <a id="footnote-reference-3" class="footnote_reference" href="#zip-0224">3</a>.</p>
            <p>The terms "Asset", "custom Asset", and "Wrapped Asset" in this document are to be interpreted as described in ZIP 226 <a id="footnote-reference-4" class="footnote_reference" href="#zip-0226">4</a>.</p>
            <p>We define the following additional terms:</p>
            <ul>
                <li>Issuance Action: an instance of a single issuance of a Zcash Shielded Asset. It defines the issuance of a single Asset Identifier.</li>
                <li>Issuance Bundle: the bundle in the transaction that contains all the issuance actions of that transaction.</li>
            </ul>
        </section>
        <section id="abstract"><h2><span class="section-heading">Abstract</span><span class="section-anchor"> <a rel="bookmark" href="#abstract"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <p>ZIP 226 <a id="footnote-reference-5" class="footnote_reference" href="#zip-0226">4</a> and ZIP 227 <a id="footnote-reference-6" class="footnote_reference" href="#zip-0227">7</a> propose in conjunction the Zcash Shielded Assets (ZSA) protocol, which is an extension of the Orchard protocol that enables the creation, transfer and burn of custom Assets on the Zcash chain. The creation of such Assets is defined in ZIP 227 <a id="footnote-reference-7" class="footnote_reference" href="#zip-0227">7</a>. The transfer and burn of such Assets is defined in ZIP 226 <a id="footnote-reference-8" class="footnote_reference" href="#zip-0226">4</a>. This ZIP must only be implemented in conjuction with ZIP 226 <a id="footnote-reference-9" class="footnote_reference" href="#zip-0226">4</a>, as the issuance mechanism is only valid for the ZSA transfer protocol, because it produces notes that can only be transferred under ZSA.</p>
        </section>
        <section id="motivation"><h2><span class="section-heading">Motivation</span><span class="section-anchor"> <a rel="bookmark" href="#motivation"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <p>This ZIP is a supporting ZIP for ZIP 226 <a id="footnote-reference-10" class="footnote_reference" href="#zip-0226">4</a>, which lays out its motivations, but requires an issuance mechanism to be defined (which is substantial enough to stand on its own) in order to function.</p>
            <p>This ZIP enables only <em>transparent</em> issuance, since as a first step, transparency will allow for proper testing of the applications that will be most used in the Zcash ecosystem, and will enable the supply of Assets to be tracked.</p>
            <p>The issuance mechanism described in this ZIP is broad enough for issuers to either create Assets on Zcash (i.e. Assets that originate on the Zcash block chain), as well as for institutions to create bridges from other chains and import "wrapped" Assets. This enables what we hope will be a useful set of applications.</p>
        </section>
        <section id="use-cases"><h2><span class="section-heading">Use Cases</span><span class="section-anchor"> <a rel="bookmark" href="#use-cases"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <p>The design presented in this ZIP enables issuance of shielded Assets in various modes:</p>
            <ul>
                <li>The issuer may or may not know the receivers of the issued Asset in advance.</li>
                <li>The Asset can be of non-fungible type, where each Asset type can be made part of a single “series”.</li>
                <li>The supply of the Asset can be limited in advance or not.</li>
                <li>The Asset can be a wrapped version of an Asset issued by another chain (as long as there is a bridge that supports transfer of that Asset between chains).</li>
            </ul>
            <p>See the <a href="#concrete-applications">Concrete Applications</a> section for more details.</p>
        </section>
        <section id="requirements"><h2><span class="section-heading">Requirements</span><span class="section-anchor"> <a rel="bookmark" href="#requirements"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <ul>
                <li>Any user of the Zcash block chain can issue custom Assets on chain.</li>
                <li>The issuance mechanism should enable public tracking of the supply of the Assets on the Zcash block chain.</li>
                <li>Issuing or changing the attributes of a specific Asset should require cryptographic authorization.</li>
                <li>The Asset identification should be unique (among all shielded pools) and different issuer public keys should not be able to generate the same Asset Identifier.</li>
                <li>An issuer should be able to issue different Assets in the same transaction. In other words, in a single "issuance bundle", the issuer should be able publish many "issuance actions", potentially creating multiple Custom Assets.</li>
                <li>Every "issuance action" should contain a <code>finalize</code> boolean that defines whether the specific Custom Asset can have further tokens issued or not.</li>
            </ul>
        </section>
        <section id="specification-issuance-keys-and-issuance-authorization-signature-scheme"><h2><span class="section-heading">Specification: Issuance Keys and Issuance Authorization Signature Scheme</span><span class="section-anchor"> <a rel="bookmark" href="#specification-issuance-keys-and-issuance-authorization-signature-scheme"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <p>The ZSA Protocol adds the following three keys to the key components <a id="footnote-reference-11" class="footnote_reference" href="#protocol-addressesandkeys">16</a>:</p>
            <ol type="1">
                <li>The issuance master key, denoted as
                    <span class="math">\(\mathsf{sk}_{\mathsf{iss}}\)</span>
                , as the name suggests, is the master key that is used to derive the other two keys.</li>
                <li>The issuance authorizing key is the key that is used to sign the issuance transaction, and is denoted as
                    <span class="math">\(\mathsf{isk}\)</span>
                . This key is used to authorize the issuance of a specific Asset Identifier, and is only used by the issuer.</li>
                <li>The issuance validating key, denoted as
                    <span class="math">\(\mathsf{ik}\)</span>
                , is the key that is used to validate the issuance transaction. This key is used to validate the issuance of a specific Asset Identifier, and is used by all block chain users (specifically the Asset owners and consensus validators) to associate the Asset in question with the issuer.</li>
            </ol>
            <p>The relations between these keys are shown in the following diagram:</p>
            <figure class="align-center" align="center">
                <img width="450" src="zip-0227-key-components-zsa.png" alt="" />
                <figcaption>Diagram of Issuance Key Components for the ZSA Protocol</figcaption>
            </figure>
            <section id="issuance-authorization-signature-scheme"><h3><span class="section-heading">Issuance Authorization Signature Scheme</span><span class="section-anchor"> <a rel="bookmark" href="#issuance-authorization-signature-scheme"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h3>
                <p>We define the issuance authorization signature scheme
                    <span class="math">\(\mathsf{IssueAuthSig}\)</span>
                 similar to
                    <span class="math">\(\mathsf{SpendAuthSig}^{\mathsf{Orchard}}\)</span>
                , the Orchard spend authorization signature scheme <a id="footnote-reference-12" class="footnote_reference" href="#protocol-concretespendauthsig">20</a>. Specifically, we instantiate
                    <span class="math">\(\mathsf{IssueAuthSig}\)</span>
                 as
                    <span class="math">\(\mathsf{RedPallas}\)</span>
                 without key re-randomization using generator
                    <span class="math">\(\mathcal{P}_{\mathbb{G}} = \mathcal{G}^{\mathsf{Issuance}} := \mathsf{GroupHash}^\mathbb{P}(\texttt{"z.cash:ZSA"}, \texttt{"Issuance"})\)</span>
                 where
                    <span class="math">\(\mathsf{GroupHash}^\mathbb{P}\)</span>
                 is defined as in the Zcash protocol specification <a id="footnote-reference-13" class="footnote_reference" href="#protocol-concretegrouphashpallasandvesta">17</a>.</p>
            </section>
            <section id="issuance-key-derivation"><h3><span class="section-heading">Issuance Key Derivation</span><span class="section-anchor"> <a rel="bookmark" href="#issuance-key-derivation"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h3>
                <p>The issuance master key is generated by choosing a bit sequence uniformly at random from
                    <span class="math">\(\mathbb{B}^{\mathbb{Y}[32]}\)</span>
                , like the Orchard spending key <a id="footnote-reference-14" class="footnote_reference" href="#protocol-orchardkeycomponents">18</a>.</p>
                <section id="issuance-master-key-derivation-for-hierarchical-deterministic-wallets"><h4><span class="section-heading">Issuance master key derivation for hierarchical deterministic wallets</span><span class="section-anchor"> <a rel="bookmark" href="#issuance-master-key-derivation-for-hierarchical-deterministic-wallets"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h4>
                    <p>The issuance master key is derived using the Orchard master key derivation procedure defined in ZIP 32 <a id="footnote-reference-15" class="footnote_reference" href="#zip-0032-orchard-master">11</a>. We reuse the functions defined there in what follows in this section.</p>
                    <p>Let
                        <span class="math">\(S\)</span>
                     be a seed byte sequence of a chosen length, which MUST be at least 32 and at most 252 bytes. We define the master extended issuance key
                        <span class="math">\(m_{\mathsf{Issuance}} := \mathsf{MasterKeyGen}(\texttt{"ZIP32ZSAIssue_V1"}, S)\)</span>
                    .</p>
                    <p>As in ZIP 32 for Orchard <a id="footnote-reference-16" class="footnote_reference" href="#zip-0032-orchard-child-key-derivation">12</a>, we only use hardened child key derivation for the issuance master key. We reuse the
                        <span class="math">\(\mathsf{CDKsk}\)</span>
                     function for Orchard child key derivation from ZIP 32.</p>
                    <p>We use the notation of ZIP 32 <a id="footnote-reference-17" class="footnote_reference" href="#zip-0032-orchard-key-path">14</a> for shielded HD paths, and define the issuance master key path as
                        <span class="math">\(m_\mathsf{Issuance} / purpose / coin\_type' / account'\)</span>
                    . We fix the path levels as follows:</p>
                    <ul>
                        <li>
                            <span class="math">\(purpose\)</span>
                        : a constant set to
                            <span class="math">\(227'\)</span>
                         (or
                            <span class="math">\(\texttt{0x800000e3}\)</span>
                        ) following the BIP 43 recommendation.</li>
                        <li>
                            <span class="math">\(coin\_type\)</span>
                        : Defined as in ZIP 32 <a id="footnote-reference-18" class="footnote_reference" href="#zip-0032-key-path-levels">13</a>.</li>
                        <li>
                            <span class="math">\(account\)</span>
                        : fixed to index
                            <span class="math">\(0\)</span>
                        .</li>
                    </ul>
                    <p>Given the <em>extended issuance master key</em>
                        <span class="math">\((\mathsf{sk}, \mathsf{c})\)</span>
                    , we set the issuance master key to be
                        <span class="math">\(\mathsf{sk_{iss}} := \mathsf{sk}\)</span>
                    .</p>
                </section>
                <section id="derivation-of-issuance-authorizing-key-and-issuance-validating-key"><h4><span class="section-heading">Derivation of issuance authorizing key and issuance validating key</span><span class="section-anchor"> <a rel="bookmark" href="#derivation-of-issuance-authorizing-key-and-issuance-validating-key"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h4>
                    <p>The issuance authorizing key and issuance validating key are derived from the issuance master key in an analogous manner to the derivation of the Orchard spend authorizing key and Orchard spend validating key from the Orchard spending key <a id="footnote-reference-19" class="footnote_reference" href="#protocol-orchardkeycomponents">18</a>, as described below.</p>
                    <ul>
                        <li>The issuance authorizing key is derived from the issuance master key,
                            <span class="math">\(\mathsf{sk}_{\mathsf{iss}}\)</span>
                        , as a private signature key:</li>
                    </ul>
                    <div class="math">\(\mathsf{isk} := \mathsf{ToScalar}^{\mathsf{Orchard}}(︀ \mathsf{sk}_{\mathsf{iss}} )\)</div>
                    <ul>
                        <li>The issuance validating key is derived from the issuance authorizing key,
                            <span class="math">\(\mathsf{isk}\)</span>
                        , as a public verification key:</li>
                    </ul>
                    <div class="math">\(\mathsf{ik} := \mathsf{IssueAuthSig}.\mathsf{DerivePublic}(\mathsf{isk})\)</div>
                    <p>This allows the issuer to use the same wallet it usually uses to transfer Assets, while keeping a disconnect from the other keys. Specifically, this method is aligned with the requirements and motivation of ZIP 32 <a id="footnote-reference-20" class="footnote_reference" href="#zip-0032">10</a>. It provides further anonymity and the ability to delegate issuance of an Asset (or in the future, generate a multi-signature protocol) while the rest of the keys remain in the wallet safe.</p>
                </section>
            </section>
        </section>
        <section id="specification-asset-identifier"><h2><span class="section-heading">Specification: Asset Identifier</span><span class="section-anchor"> <a rel="bookmark" href="#specification-asset-identifier"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <p>For every new Asset, there must be a new and unique Asset Identifier. We define this to be a globally unique pair
                <span class="math">\((\mathsf{ik}, \mathsf{asset\_desc})\)</span>
            , where
                <span class="math">\(\mathsf{ik}\)</span>
             is the issuance key and
                <span class="math">\(\mathsf{asset\_desc}\)</span>
             is a byte string.</p>
            <p>A given Asset Identifier is used across all Zcash protocols that support ZSAs -- that is, the Orchard-based ZSA protocol and potentially future Zcash shielded protocols. For this Asset Identifier, we derive an Asset Digest,
                <span class="math">\(\mathsf{AssetDigest}\)</span>
            , which is simply is a
                <span class="math">\(\textsf{BLAKE2b-512}\)</span>
             hash of the Asset Identifier. From the Asset Digest, we derive a specific Asset Base within each such shielded protocol (for example
                <span class="math">\(\mathsf{AssetBase}^{\mathsf{Orchard}}_{\mathsf{AssetId}}\)</span>
             for the Orchard-based ZSA protocol), using the applicable hash-to-curve algorithm. This Asset Base is included in shielded notes.</p>
            <p>Let</p>
            <ul>
                <li>
                    <span class="math">\(\mathsf{asset\_desc}\)</span>
                 be the asset description, which includes any information pertaining to the issuance, and is a byte sequence of up to 512 bytes which SHOULD be a well-formed UTF-8 code unit sequence according to Unicode 15.0.0 or later.</li>
                <li>
                    <span class="math">\(\mathsf{ik}\)</span>
                 be the issuance validating key of the issuer, a public key used to verify the signature on the issuance transaction's SIGHASH.</li>
            </ul>
            <p>Define
                <span class="math">\(\mathsf{AssetDigest_{\mathsf{AssetId}}} := \textsf{BLAKE2b-512}(\texttt{"ZSA-Asset-Digest"},\; \mathsf{EncodeAssetId}(\mathsf{AssetId}))\)</span>
            , where</p>
            <ul>
                <li>
                    <span class="math">\(\mathsf{EncodeAssetId}(\mathsf{AssetId}) = \mathsf{EncodeAssetId}(\mathsf{ik}, \mathsf{asset\_desc}) := \mathsf{0x00} || \mathsf{repr}_{\mathbb{P}}(\mathsf{ik}) || \mathsf{asset\_desc}\!\)</span>
                .</li>
            </ul>
            <p>Define
                <span class="math">\(\mathsf{AssetBase^{Protocol}_{\mathsf{AssetId}}} := \mathsf{ZSAValueBase^{Protocol}}(\mathsf{AssetDigest}_{\mathsf{AssetId}})\)</span>
            , where</p>
            <p>In the case of Orchard, we define
                <span class="math">\(\mathsf{ZSAValueBase^{Orchard}}(\mathsf{asset\_digest}) := \mathsf{GroupHash}^\mathbb{P}(\texttt{"z.cash:OrchardZSA"}, \mathsf{asset\_digest})\)</span>
             where
                <span class="math">\(\mathsf{GroupHash}^\mathbb{P}\)</span>
             is defined as in <a id="footnote-reference-21" class="footnote_reference" href="#protocol-concretegrouphashpallasandvesta">17</a>.</p>
            <p>The relations between the Asset Identifier, Asset Digest, and Asset Base are shown in the following diagram:</p>
            <figure class="align-center" align="center">
                <img width="600" src="zip-0227-asset-identifier-relation.png" alt="" />
                <figcaption>Diagram relating the Asset Identifier, Asset Digest, and Asset Base in the ZSA Protocol</figcaption>
            </figure>
        </section>
        <section id="specification-global-issuance-state"><h2><span class="section-heading">Specification: Global Issuance State</span><span class="section-anchor"> <a rel="bookmark" href="#specification-global-issuance-state"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <p>Issuance requires the following additions to the global state defined at block boundaries:</p>
            <ul>
                <li>
                    <span class="math">\(\mathsf{previously\_finalized}\)</span>
                , a set of
                    <span class="math">\(\mathsf{AssetId}\)</span>
                 that have been finalized (i.e.: the <code>finalize</code> flag has been set to <code>1</code> in some issuance transaction preceding the block boundary).</li>
            </ul>
        </section>
        <section id="specification-issuance-action-issuance-bundle-and-issuance-protocol"><h2><span class="section-heading">Specification: Issuance Action, Issuance Bundle and Issuance Protocol</span><span class="section-anchor"> <a rel="bookmark" href="#specification-issuance-action-issuance-bundle-and-issuance-protocol"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <section id="issuance-action-description"><h3><span class="section-heading">Issuance Action Description</span><span class="section-anchor"> <a rel="bookmark" href="#issuance-action-description"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h3>
                <p>An issuance action, <cite>IssueAction</cite>, is the instance of issuing a specific custom Asset, and contains the following fields:</p>
                <ul>
                    <li>
                        <span class="math">\(\mathsf{assetDescSize}\)</span>
                    : the size of the Asset description, a number between
                        <span class="math">\(0\)</span>
                     and
                        <span class="math">\(512\)</span>
                    , stored in two bytes.</li>
                    <li>
                        <span class="math">\(\mathsf{asset\_desc}\)</span>
                    : the Asset description, a byte string of up to 512 bytes as defined in the <a href="#specification-asset-identifier">Specification: Asset Identifier</a> section.</li>
                    <li><cite>notes</cite>: an array containing the unencrypted output notes of the recipients of the Asset, of type <cite>Note</cite></li>
                    <li><code>finalize</code>: a boolean that defines whether the issuance of that specific custom Asset is finalized or not</li>
                </ul>
                <p>An asset's
                    <span class="math">\(\mathsf{AssetId}\)</span>
                 is added to the
                    <span class="math">\(\mathsf{previously\_finalized}\)</span>
                 set after a block that contains any issuance transaction for that asset with <code>finalize = 1</code>. It then cannot be removed from this set. For Assets with
                    <span class="math">\(\mathsf{AssetId} \in \mathsf{previously\_finalized}\)</span>
                , no further tokens can be issued, so as seen below, the validators will reject the transaction. For Assets with
                    <span class="math">\(\mathsf{AssetId} \not\in \mathsf{previously\_finalized}\)</span>
                , new issuance actions can be issued in future transactions. These must use the same Asset description,
                    <span class="math">\(\mathsf{asset\_desc}\)</span>
                , and can either maintain <code>finalize = 0</code> or change it to <code>finalize = 1</code>, denoting that this custom Asset cannot be issued after the containing block.</p>
                <table>
                    <thead>
                        <tr>
                            <th>Size</th>
                            <th>Name</th>
                            <th>Data Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2 bytes</td>
                            <td>
                                <span class="math">\(\mathsf{assetDescSize}\)</span>
                            </td>
                            <td>byte</td>
                            <td>The length of the
                                <span class="math">\(\mathsf{asset\_desc}\)</span>
                             string in bytes</td>
                        </tr>
                        <tr>
                            <td>Varies</td>
                            <td>
                                <span class="math">\(\mathsf{asset\_desc}\)</span>
                            </td>
                            <td>byte</td>
                            <td>UTF-8 encoded string, of size
                                <span class="math">\(\mathsf{assetDescSize}\)</span>
                             bytes</td>
                        </tr>
                        <tr>
                            <td>Varies</td>
                            <td>nNotes</td>
                            <td>compactSize</td>
                            <td>The number of notes in the issuance action</td>
                        </tr>
                        <tr>
                            <td>noteSize * nNotes</td>
                            <td>vNotes</td>
                            <td>Note[nNotes]</td>
                            <td>A sequence of note descriptions within the issuance action</td>
                        </tr>
                        <tr>
                            <td>1 byte</td>
                            <td><code>flagsIssuance</code></td>
                            <td>byte</td>
                            <td>An 8-bit value with the <code>finalize</code> boolean value as the LSB, and the other bits set to 0.</td>
                        </tr>
                    </tbody>
                </table>
                <p>We note that the output note commitment of the recipient's notes are not included in the actual transaction, but when added to the global state of the chain, they will be added to the <cite>NoteCommitmentTree</cite> as a shielded note. This prevents future usage of the note from being linked to the issuance transaction, as the nullifier key is not known to the validators and chain observers.</p>
            </section>
            <section id="issuance-bundle"><h3><span class="section-heading">Issuance Bundle</span><span class="section-anchor"> <a rel="bookmark" href="#issuance-bundle"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h3>
                <p>An issuance bundle, <cite>IssueBundle</cite>, is the aggregate of all the issuance-related information. Specifically, contains all the issuance actions and the issuer signature on the transaction SIGHASH that validates the issuance itself. It contains the following fields:</p>
                <ul>
                    <li>
                        <span class="math">\(\mathsf{ik}\)</span>
                    : the issuance validating key, that allows the validators to verify that the
                        <span class="math">\(\mathsf{AssetId}\)</span>
                     is properly associated with the issuer.</li>
                    <li><cite>actions</cite>: an array of issuance actions, of type <cite>IssueAction</cite>.</li>
                    <li><cite>issueAuthSig</cite>: the signature of the transaction SIGHASH, signed by the issuance authorizing key,
                        <span class="math">\(\mathsf{isk}\)</span>
                    , that validates the issuance .</li>
                </ul>
                <p>The issuance bundle is then added within the transaction format as a new bundle. That is, issuance requires the addition of the following information to the transaction format <a id="footnote-reference-22" class="footnote_reference" href="#protocol-transactionstructure">22</a>.</p>
                <table>
                    <thead>
                        <tr>
                            <th>Bytes</th>
                            <th>Name</th>
                            <th>Data Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Varies</td>
                            <td>nIssueActions</td>
                            <td>compactSize</td>
                            <td>The number of issuance actions in the bundle</td>
                        </tr>
                        <tr>
                            <td>Varies</td>
                            <td>vIssueActions</td>
                            <td>IssueAction[nIssueActions]</td>
                            <td>A sequence of issuance actions descriptions</td>
                        </tr>
                        <tr>
                            <td>32</td>
                            <td>
                                <span class="math">\(\mathsf{ik}\)</span>
                            </td>
                            <td>byte[32]</td>
                            <td>The issuance validating key of the issuer, used to validate the signature</td>
                        </tr>
                        <tr>
                            <td>64</td>
                            <td>issueAuthSig</td>
                            <td>byte[64]</td>
                            <td>The signature of the transaction SIGHASH, signed by the issuer, validated as in <a href="#issuance-authorization-signature-scheme">Issuance Authorization Signature Scheme</a></td>
                        </tr>
                    </tbody>
                </table>
            </section>
            <section id="issuance-protocol"><h3><span class="section-heading">Issuance Protocol</span><span class="section-anchor"> <a rel="bookmark" href="#issuance-protocol"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h3>
                <p>The issuer program performs the following operations</p>
                <p>For all actions <cite>IssueAction</cite>:</p>
                <ul>
                    <li>encode
                        <span class="math">\(\mathsf{asset\_desc}\)</span>
                     as a UTF-8 byte string of size up to 512.</li>
                    <li>compute
                        <span class="math">\(\mathsf{AssetDigest}\)</span>
                     from the issuance validating key
                        <span class="math">\(\mathsf{ik}\)</span>
                     and
                        <span class="math">\(\mathsf{asset\_desc}\)</span>
                     as decribed in the <a href="#specification-asset-identifier">Specification: Asset Identifier</a> section.</li>
                    <li>compute
                        <span class="math">\(\mathsf{AssetBase^{Protocol}}\)</span>
                     from
                        <span class="math">\(\mathsf{AssetDigest}\)</span>
                     as decribed in the <a href="#specification-asset-identifier">Specification: Asset Identifier</a> section.</li>
                    <li>set the <code>finalize</code> boolean as desired (if more more issuance actions are to be created for this Asset Identifier, set <code>finalize = 0</code>, otherwise set <code>finalize = 1</code>)</li>
                    <li>For each recipient
                        <span class="math">\(i\)</span>
                    :
                        <ul>
                            <li>generate a ZSA output note that includes the Asset Base. For an Orchard-based ZSA note this is
                                <span class="math">\(\mathsf{note}_i = (\mathsf{d}_i, \mathsf{pk}_{\mathsf{d},i}, \mathsf{v}_i, \rho_i, \psi_i, \mathsf{AssetBase^{Orchard}}, \mathsf{rcm}_i)\!\)</span>
                            .</li>
                        </ul>
                    </li>
                    <li>encode the <cite>IssueAction</cite> into the vector <cite>vIssueActions</cite> of the bundle</li>
                </ul>
                <p>For the <cite>IssueBundle</cite>:</p>
                <ul>
                    <li>encode the <cite>vIssueActions</cite> vector</li>
                    <li>encode the
                        <span class="math">\(\mathsf{ik}\)</span>
                     as 32 byte-string</li>
                    <li>sign the <cite>SIGHASH</cite> of the transaction with the issuance authorizing key,
                        <span class="math">\(\mathsf{isk}\)</span>
                    , using the
                        <span class="math">\(\mathsf{IssueAuthSig}\)</span>
                     signature scheme. The signature is then added to the issuance bundle.</li>
                </ul>
                <p>NOTE that the commitment is not included in the <cite>IssuanceAction</cite> itself. As explained below, it is later computed by the validators and added to the <cite>NoteCommitmentTree</cite>.</p>
            </section>
        </section>
        <section id="specification-consensus-rule-changes"><h2><span class="section-heading">Specification: Consensus Rule Changes</span><span class="section-anchor"> <a rel="bookmark" href="#specification-consensus-rule-changes"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <p>For the IssueBundle:</p>
            <ul>
                <li>Verify the RedPallas-based issuance authorization signature on <cite>SIGHASH</cite>, <cite>issueAuthSig</cite>, is verified by invoking <cite>issueAuthSig.VerifySig(ik, SIGHASH)</cite></li>
            </ul>
            <p>For each <cite>IssueAction</cite> in <cite>IssueBundle</cite>:</p>
            <ul>
                <li>check that
                    <span class="math">\(0 &lt; \mathsf{assetDescSize} &lt;= 512\)</span>
                .</li>
                <li>check that
                    <span class="math">\(\mathsf{asset\_desc}\)</span>
                 is a string of length
                    <span class="math">\(\mathsf{assetDescSize}\)</span>
                 bytes.</li>
                <li>retrieve
                    <span class="math">\(\mathsf{AssetBase}\)</span>
                 from the first note in the sequence and check that
                    <span class="math">\(\mathsf{AssetBase}\)</span>
                 is derived from the issuance validating key
                    <span class="math">\(\mathsf{ik}\)</span>
                 and
                    <span class="math">\(\mathsf{asset\_desc}\)</span>
                 as described in the <a href="#specification-asset-identifier">Specification: Asset Identifier</a> section.</li>
                <li>check that the
                    <span class="math">\(\mathsf{AssetId}\)</span>
                 does not exist in the <code>previously_finalized</code> set in the global state.</li>
                <li>check that every note in the <cite>IssueAction</cite> contains the same
                    <span class="math">\(\mathsf{AssetBase}\)</span>
                 and is properly constructed as
                    <span class="math">\(note = (\mathsf{g_d, pk_d, v, \rho, \psi, AssetBase})\)</span>
                .</li>
            </ul>
            <p>If all of the above checks pass, do the following:</p>
            <ul>
                <li>For each note, compute the note commitment as
                    <span class="math">\(\mathsf{cm} = \mathsf{NoteCommit^{OrchardZSA}_{rcm}(repr_{\mathbb{P}}(g_d), repr_{\mathbb{P}}(pk_d), v, \rho, \psi, AssetBase)}\)</span>
                 as defined in the Note Structure and Commitment section of ZIP 226 <a id="footnote-reference-23" class="footnote_reference" href="#zip-0226-notestructure">5</a> and</li>
                <li>add
                    <span class="math">\(\mathsf{cm}\)</span>
                 to the Merkle tree of note commitments, <cite>NoteCommitmentTree</cite>.</li>
                <li>If <code>finalize = 1</code>, add
                    <span class="math">\(\mathsf{AssetId}\)</span>
                 to the <code>previously_finalized</code> set immediately after the block in which this transaction occurs.</li>
                <li>(Replay Protection) If issue bundle is present, the fees MUST be greater than zero.</li>
            </ul>
        </section>
        <section id="rationale"><h2><span class="section-heading">Rationale</span><span class="section-anchor"> <a rel="bookmark" href="#rationale"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <p>The following is a list of rationale for different decisions made in the proposal:</p>
            <ul>
                <li>The issuance key structure is independent of the original key tree, but derived in an analogous manner (via ZIP 32). This is in order to keep the issuance details and the Asset Identifiers consistent across multiple shielded pools.</li>
                <li>The design decision is not to have a chosen name to describe the Custom Asset, but to delegate it to an off-chain mapping, as this would imply a land-grab “war”.</li>
                <li>The
                    <span class="math">\(\mathsf{asset\_desc}\)</span>
                 is a general byte string in order to allow for a wide range of information type to be included that may be associated with the Assets. Some are:
                    <ul>
                        <li>links for storage such as for NFTs.</li>
                        <li>metadata for Assets, encoded in any format.</li>
                        <li>bridging information for Wrapped Assets (chain of origin, issuer name, etc)</li>
                        <li>information to be committed by the issuer, though not enforceable by the protocol.</li>
                    </ul>
                </li>
                <li>We require a check whether the <code>finalize</code> flag only has been set in a previous block rather than a previous transaction in the same block. In other words, we only update the <code>previously_finalized</code> set at the block boundary. This is in keeping with the current property which allows for a miner to reorder transactions in a block without changing the meaning, which we aim to preserve.</li>
                <li>We require non-zero fees in the presence of an issue bundle, in order to preclude the possibility of a transaction containing only an issue bundle. If a transaction includes only an issue bundle, the <code>SIGHASH</code> would be computed solely based on the issue bundle. A duplicate bundle would have the same <code>SIGHASH</code>, potentially allowing for a replay attack.</li>
            </ul>
            <section id="concrete-applications"><h3><span class="section-heading">Concrete Applications</span><span class="section-anchor"> <a rel="bookmark" href="#concrete-applications"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h3>
                <p><strong>Asset Features</strong></p>
                <ul>
                    <li>By using the <code>finalize</code> boolean and the burning mechanism defined in <a id="footnote-reference-24" class="footnote_reference" href="#zip-0226">4</a>, issuers can control the supply production of any Asset associated to their issuer keys. For example,
                        <ul>
                            <li>by setting <code>finalize = 1</code> from the first issuance action for that Asset Identifier, the issuer is in essence creating a one-time issuance transaction. This is useful when the max supply is capped from the beginning and the distribution is known in advance. All tokens are issued at once and distributed as needed.</li>
                        </ul>
                    </li>
                    <li>Issuers can also stop the existing supply production of any Asset associated to their issuer keys. This could be done by
                        <ul>
                            <li>issuing a last set of tokens of that specific
                                <span class="math">\(\mathsf{AssetId}\)</span>
                            , for which <code>finalize = 1</code>, or by</li>
                            <li>issuing a transaction with a single note in the issuance action pertaining to that
                                <span class="math">\(\mathsf{AssetId}\)</span>
                            , where the note will contain a <code>value = 0</code>. This can be used for application-specific purposes (NFT collections) or for security purposes to revoke the Asset issuance (see Security and Privacy Considerations).</li>
                            <li>Note in the above cases, that the setting of the <code>finalize</code> flag will take effect at the block boundary, that is, after all the transactions in the block.</li>
                        </ul>
                    </li>
                    <li>The issuance and burn mechanisms can be used in conjunction to determine the supply of Assets on the Zcash ecosystem. This allows for the bridging of Assets defined on other chains.</li>
                    <li>Furthermore, NFT issuance is enabled by issuing in a single bundle several issuance actions, where each
                        <span class="math">\(\mathsf{AssetId}\)</span>
                     corresponds to <code>value = 1</code> at the fundamental unit level. Issuers and users should make sure that <code>finalize = 1</code> for each of the actions in this scenario.</li>
                </ul>
            </section>
        </section>
        <section id="txid-digest-issuance"><h2><span class="section-heading">TxId Digest - Issuance</span><span class="section-anchor"> <a rel="bookmark" href="#txid-digest-issuance"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <p>This section details the construction of the subtree of hashes in the transaction digest that corresponds to issuance transaction data. Details of the overall changes to the transaction digest due to the ZSA protocol can be found in ZIP 226 <a id="footnote-reference-25" class="footnote_reference" href="#zip-0226-txiddigest">6</a>. As in ZIP 244 <a id="footnote-reference-26" class="footnote_reference" href="#zip-0244">8</a>, the digests are all personalized BLAKE2b-256 hashes, and in cases where no elements are available for hashing, a personalized hash of the empty byte array is used.</p>
            <p>A new issuance transaction digest algorithm is defined that constructs the subtree of the transaction digest tree of hashes for the issuance portion of a transaction. Each branch of the subtree will correspond to a specific subset of issuance transaction data. The overall structure of the hash is as follows; each name referenced here will be described in detail below:</p>
            <pre>issuance_txid_digest
├── issue_actions_digest
└── issuanceValidatingKey</pre>
            <p>In the specification below, nodes of the tree are presented in depth-first order.</p>
            <section id="issuance-txid-digest"><h3><span class="section-heading">issuance_txid_digest</span><span class="section-anchor"> <a rel="bookmark" href="#issuance-txid-digest"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h3>
                <p>A BLAKE2b-256 hash of the following values</p>
                <pre>T.1: issue_actions_digest    (32-byte hash output)
T.2: issuanceValidatingKey   (32 bytes)</pre>
                <p>The personalization field of this hash is set to:</p>
                <pre>"ZTxIdSAIssueHash"</pre>
                <p>In case the transaction has no issuance components, ''issue_actions_digest'' is:</p>
                <pre>BLAKE2b-256("ZTxIdSAIssueHash", [])</pre>
                <section id="t-1-issue-actions-digest"><h4><span class="section-heading">T.1: issue_actions_digest</span><span class="section-anchor"> <a rel="bookmark" href="#t-1-issue-actions-digest"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h4>
                    <p>A BLAKE2b-256 hash of Issue Action information for all Issuance Actions belonging to the transaction. For each Action, the following elements are included in the hash:</p>
                    <pre>T.1a: notes_digest            (32-byte hash output)
T.1b: assetDescription        (field encoding bytes)
T.1c: flagsIssuance           (1 byte)</pre>
                    <p>The personalization field of this hash is set to:</p>
                    <pre>"ZTxIdIssActHash"</pre>
                    <section id="t-1a-notes-digest"><h5><span class="section-heading">T.1a: notes_digest</span><span class="section-anchor"> <a rel="bookmark" href="#t-1a-notes-digest"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h5>
                        <p>A BLAKE2b-256 hash of Note information for all Notes belonging to the Issuance Action. For each Note, the following elements are included in the hash:</p>
                        <pre>T.1a.1: recipient                    (field encoding bytes)
T.1a.2: value                        (field encoding bytes)
T.1a.3: assetBase                    (field encoding bytes)
T.1a.4: rho                          (field encoding bytes)
T.1a.5: rseed                        (field encoding bytes)</pre>
                        <p>The personalization field of this hash is set to:</p>
                        <pre>"ZTxIdIANoteHash"</pre>
                        <section id="t-1a-1-recipient"><h6><span class="section-heading">T.1a.1: recipient</span><span class="section-anchor"> <a rel="bookmark" href="#t-1a-1-recipient"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h6>
                            <p>This is the raw encoding of an Orchard shielded payment address as defined in the protocol specification <a id="footnote-reference-27" class="footnote_reference" href="#protocol-orchardpaymentaddrencoding">21</a>.</p>
                        </section>
                        <section id="t-1a-2-value"><h6><span class="section-heading">T.1a.2: value</span><span class="section-anchor"> <a rel="bookmark" href="#t-1a-2-value"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h6>
                            <p>Note value encoded as little-endian 8-byte representation of u64 raw value.</p>
                        </section>
                        <section id="t-1a-3-assetbase"><h6><span class="section-heading">T.1a.3: assetBase</span><span class="section-anchor"> <a rel="bookmark" href="#t-1a-3-assetbase"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h6>
                            <p>Asset Base encoded as the 32-byte representation of a point on the Pallas curve.</p>
                        </section>
                        <section id="t-1a-4-rho"><h6><span class="section-heading">T.1a.4: rho</span><span class="section-anchor"> <a rel="bookmark" href="#t-1a-4-rho"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h6>
                            <p>Nullifier encoded as 32-byte representation of a point on the Pallas curve.</p>
                        </section>
                        <section id="t-1a-5-rseed"><h6><span class="section-heading">T.1a.5: rseed</span><span class="section-anchor"> <a rel="bookmark" href="#t-1a-5-rseed"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h6>
                            <p>The ZIP 212 32-byte seed randomness for a note.</p>
                        </section>
                    </section>
                    <section id="t-1b-assetdescription"><h5><span class="section-heading">T.1b: assetDescription</span><span class="section-anchor"> <a rel="bookmark" href="#t-1b-assetdescription"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h5>
                        <p>The Asset description byte string.</p>
                    </section>
                    <section id="t-1c-flagsissuance"><h5><span class="section-heading">T.1c: flagsIssuance</span><span class="section-anchor"> <a rel="bookmark" href="#t-1c-flagsissuance"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h5>
                        <p>An 8-bit value representing a set of flags. Ordered from LSB to MSB:</p>
                        <ul>
                            <li><code>finalize</code></li>
                            <li>The remaining bits are set to <cite>0</cite>.</li>
                        </ul>
                    </section>
                </section>
                <section id="t-2-issuancevalidatingkey"><h4><span class="section-heading">T.2: issuanceValidatingKey</span><span class="section-anchor"> <a rel="bookmark" href="#t-2-issuancevalidatingkey"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h4>
                    <p>A byte encoding of issuance validating key for the bundle as defined in the <a href="#issuance-key-derivation">Issuance Key Derivation</a> section.</p>
                </section>
            </section>
        </section>
        <section id="security-and-privacy-considerations"><h2><span class="section-heading">Security and Privacy Considerations</span><span class="section-anchor"> <a rel="bookmark" href="#security-and-privacy-considerations"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <section id="issuance-key-compromise"><h3><span class="section-heading">Issuance Key Compromise</span><span class="section-anchor"> <a rel="bookmark" href="#issuance-key-compromise"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h3>
                <p>The design of this protocol does not currently allow for a rotation of the issuance validating key that would allow for replacing the key of a specific Asset (see <a href="#future-work">Future Work</a>). In case of compromise, the following actions are recommended:</p>
                <ul>
                    <li>If an issuance validating key is compromised, the <code>finalize</code> boolean for all the Assets issued with that key should be set to
                        <span class="math">\(1\)</span>
                     and the issuer should change to a new issuance authorizing key, and issue new Assets, each with a new
                        <span class="math">\(\mathsf{AssetId}\)</span>
                    .</li>
                </ul>
            </section>
            <section id="bridging-assets"><h3><span class="section-heading">Bridging Assets</span><span class="section-anchor"> <a rel="bookmark" href="#bridging-assets"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h3>
                <p>For bridging purposes, the secure method of off-boarding Assets is to burn an Asset with the burning mechanism in ZIP 226 <a id="footnote-reference-28" class="footnote_reference" href="#zip-0226">4</a>. Users should be aware of issuers that demand the Assets be sent to a specific address on the Zcash chain to be redeemed elsewhere, as this may not reflect the real reserve value of the specific Wrapped Asset.</p>
            </section>
        </section>
        <section id="other-considerations"><h2><span class="section-heading">Other Considerations</span><span class="section-anchor"> <a rel="bookmark" href="#other-considerations"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <section id="implementing-zcash-nodes"><h3><span class="section-heading">Implementing Zcash Nodes</span><span class="section-anchor"> <a rel="bookmark" href="#implementing-zcash-nodes"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h3>
                <p>Although not enforced in the global state, it is RECOMMENDED that Zcash full validators keep track of the total supply of Assets as a mutable mapping <cite>issuanceSupplyInfoMap</cite> from
                    <span class="math">\(\mathsf{AssetId}\)</span>
                 to
                    <span class="math">\(\mathsf{issuanceSupplyInfoMap := (totalSupply, finalize)}\)</span>
                 in order to properly keep track of the total supply for different Asset Identifiers. This is useful for wallets and other applications that need to keep track of the total supply of Assets.</p>
            </section>
            <section id="fee-structures"><h3><span class="section-heading">Fee Structures</span><span class="section-anchor"> <a rel="bookmark" href="#fee-structures"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h3>
                <p>The fee mechanism described in this ZIP will follow the mechanism described in ZIP 317b <a id="footnote-reference-29" class="footnote_reference" href="#zip-0317b">9</a>.</p>
            </section>
            <section id="future-work"><h3><span class="section-heading">Future Work</span><span class="section-anchor"> <a rel="bookmark" href="#future-work"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h3>
                <p>In future versions of this ZIP, the protocol may also include a "key rotation" mechanism. This would allow an issuer to change the underlying
                    <span class="math">\(\mathsf{ik}\)</span>
                 of a given Asset, in case the original one was compromised, without having to change the Asset Identifier altogether.</p>
            </section>
        </section>
        <section id="test-vectors"><h2><span class="section-heading">Test Vectors</span><span class="section-anchor"> <a rel="bookmark" href="#test-vectors"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <ul>
                <li>LINK TBD</li>
            </ul>
        </section>
        <section id="reference-implementation"><h2><span class="section-heading">Reference Implementation</span><span class="section-anchor"> <a rel="bookmark" href="#reference-implementation"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <ul>
                <li>LINK TBD</li>
                <li>LINK TBD</li>
            </ul>
        </section>
        <section id="deployment"><h2><span class="section-heading">Deployment</span><span class="section-anchor"> <a rel="bookmark" href="#deployment"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <p>This ZIP is proposed to activate with Network Upgrade 6.</p>
        </section>
        <section id="references"><h2><span class="section-heading">References</span><span class="section-anchor"> <a rel="bookmark" href="#references"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h2>
            <table id="rfc2119" class="footnote">
                <tbody>
                    <tr>
                        <th>1</th>
                        <td><a href="https://www.rfc-editor.org/rfc/rfc2119.html">RFC 2119: Key words for use in RFCs to Indicate Requirement Levels</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="zip-0200" class="footnote">
                <tbody>
                    <tr>
                        <th>2</th>
                        <td><a href="zip-0200.html">ZIP 200: Network Upgrade Mechanism</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="zip-0224" class="footnote">
                <tbody>
                    <tr>
                        <th>3</th>
                        <td><a href="zip-0224.html">ZIP 224: Orchard</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="zip-0226" class="footnote">
                <tbody>
                    <tr>
                        <th>4</th>
                        <td><a href="zip-0226.html">ZIP 226: Transfer and Burn of Zcash Shielded Assets</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="zip-0226-notestructure" class="footnote">
                <tbody>
                    <tr>
                        <th>5</th>
                        <td><a href="zip-0226.html#note-structure-commitment">ZIP 226: Transfer and Burn of Zcash Shielded Assets - Note Structure &amp; Commitment</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="zip-0226-txiddigest" class="footnote">
                <tbody>
                    <tr>
                        <th>6</th>
                        <td><a href="zip-0226.html#txid-digest">ZIP 226: Transfer and Burn of Zcash Shielded Assets - TxId Digest</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="zip-0227" class="footnote">
                <tbody>
                    <tr>
                        <th>7</th>
                        <td><a href="zip-0227.html">ZIP 227: Issuance of Zcash Shielded Assets</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="zip-0244" class="footnote">
                <tbody>
                    <tr>
                        <th>8</th>
                        <td><a href="zip-0244.html">ZIP 244: Transaction Identifier Non-Malleability</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="zip-0317b" class="footnote">
                <tbody>
                    <tr>
                        <th>9</th>
                        <td><a href="zip-0317b.html">ZIP 317b: ZSA Extension Proportional Fee Mechanism</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="zip-0032" class="footnote">
                <tbody>
                    <tr>
                        <th>10</th>
                        <td><a href="zip-0032.html">ZIP 32: Shielded Hierarchical Deterministic Wallets</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="zip-0032-orchard-master" class="footnote">
                <tbody>
                    <tr>
                        <th>11</th>
                        <td><a href="zip-0032.html#orchard-master-key-generation">ZIP 32: Shielded Hierarchical Deterministic Wallets - Orchard master key generation</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="zip-0032-orchard-child-key-derivation" class="footnote">
                <tbody>
                    <tr>
                        <th>12</th>
                        <td><a href="zip-0032.html#orchard-child-key-derivation">ZIP 32: Shielded Hierarchical Deterministic Wallets - Orchard child key derivation</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="zip-0032-key-path-levels" class="footnote">
                <tbody>
                    <tr>
                        <th>13</th>
                        <td><a href="zip-0032.html#key-path-levels">ZIP 32: Shielded Hierarchical Deterministic Wallets - Key path levels</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="zip-0032-orchard-key-path" class="footnote">
                <tbody>
                    <tr>
                        <th>14</th>
                        <td><a href="zip-0032.html#orchard-key-path">ZIP 32: Shielded Hierarchical Deterministic Wallets - Orchard key path</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="zip-0316" class="footnote">
                <tbody>
                    <tr>
                        <th>15</th>
                        <td><a href="zip-0316.html">ZIP 316: Unified Addresses and Unified Viewing Keys</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="protocol-addressesandkeys" class="footnote">
                <tbody>
                    <tr>
                        <th>16</th>
                        <td><a href="protocol/protocol.pdf#addressesandkeys">Zcash Protocol Specification, Version 2022.3.8. Section 3.1: Payment Addresses and Keys</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="protocol-concretegrouphashpallasandvesta" class="footnote">
                <tbody>
                    <tr>
                        <th>17</th>
                        <td><a href="protocol/protocol.pdf#concretegrouphashpallasandvesta">Zcash Protocol Specification, Version 2022.3.8. Section 5.4.9.8: Group Hash into Pallas and Vesta</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="protocol-orchardkeycomponents" class="footnote">
                <tbody>
                    <tr>
                        <th>18</th>
                        <td><a href="protocol/protocol.pdf#orchardkeycomponents">Zcash Protocol Specification, Version 2022.3.8. Section 4.2.3: Orchard Key Components</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="protocol-spendauthsig" class="footnote">
                <tbody>
                    <tr>
                        <th>19</th>
                        <td><a href="protocol/protocol.pdf#spendauthsig">Zcash Protocol Specification, Version 2022.3.8. Section 4.15: Spend Authorization Signature (Sapling and Orchard)</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="protocol-concretespendauthsig" class="footnote">
                <tbody>
                    <tr>
                        <th>20</th>
                        <td><a href="protocol/protocol.pdf#concretespendauthsig">Zcash Protocol Specification, Version 2022.3.8. Section 5.4.7.1: Spend Authorization Signature (Sapling and Orchard)</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="protocol-orchardpaymentaddrencoding" class="footnote">
                <tbody>
                    <tr>
                        <th>21</th>
                        <td><a href="protocol/protocol.pdf#orchardpaymentaddrencoding">Zcash Protocol Specification, Version 2022.3.8. Section 5.6.4.2: Orchard Raw Payment Addresses</a></td>
                    </tr>
                </tbody>
            </table>
            <table id="protocol-transactionstructure" class="footnote">
                <tbody>
                    <tr>
                        <th>22</th>
                        <td><a href="protocol/protocol.pdf#">Zcash Protocol Specification, Version 2022.3.8. Section 7.1: Transaction Encoding and Consensus (Transaction Version 5)</a></td>
                    </tr>
                </tbody>
            </table>
        </section>
    </section>
</body>
</html>