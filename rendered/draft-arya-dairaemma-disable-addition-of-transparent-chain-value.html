<!DOCTYPE html>
<html>
<head>
    <title>Draft arya-dairaemma-disable-addition-of-transparent-chain-value: Disabling Addition of New Value to the Transparent Chain Value Pool</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="css/style.css">
</head>
<body>
<pre><code>ZIP: XXX
Title: Disabling Addition of New Value to the Transparent Chain Value Pool
Owners: Arya &lt;arya@zfnd.org&gt;
        Daira-Emma Hopwood &lt;daira-emma@electriccoin.co&gt;
Status: Draft
Category: Consensus
Created: 2025-08-13
License: MIT
Discussions-To: &lt;<a href="https://github.com/zcash/zips/issues/1115">https://github.com/zcash/zips/issues/1115</a>&gt;
Pull-Request: &lt;<a href="https://github.com/zcash/zips/pull/1067">https://github.com/zcash/zips/pull/1067</a>&gt;
</code></pre>

<h1 id="terminology"><span class="section-heading">Terminology</span><span class="section-anchor"> <a rel="bookmark" href="#terminology"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h1>

<p>The key word &#8220;MUST&#8221; and &#8220;OPTIONAL&#8221; in this document are to be interpreted as
described in BCP 14 <a href="#fn:1" id="fnref:1" title="see footnote" class="footnote"><sup>1</sup></a> when, and only when, they appear in all capitals.</p>

<p>The term &#8220;network upgrade&#8221; in this document is to be interpreted as described
in ZIP 200. <a href="#fn:2" id="fnref:2" title="see footnote" class="footnote"><sup>2</sup></a></p>

<p>The character § is used when referring to sections of the Zcash Protocol
Specification. <a href="#fn:3" id="fnref:3" title="see footnote" class="footnote"><sup>3</sup></a></p>

<p>The term &#8220;transparent protocol&#8221; in this document refers to the
payment protocol derived from Bitcoin that provides no privacy.</p>

<p>The term &#8220;Sprout shielded protocol&#8221; in this document refers to the shielded
payment protocol present at Zcash launch. <a href="#fn:3" title="see footnote" class="footnote"><sup>3</sup></a></p>

<p>The term &#8220;Sapling shielded protocol&#8221; in this document refers to the shielded
payment protocol introduced in the Sapling network upgrade. <a href="#fn:4" id="fnref:4" title="see footnote" class="footnote"><sup>4</sup></a></p>

<p>The term &#8220;Orchard shielded protocol&#8221; in this document refers to the shielded
payment protocol introduced in the NU5 network upgrade. <a href="#fn:5" id="fnref:5" title="see footnote" class="footnote"><sup>5</sup></a></p>

<p>The term &#8220;transparent chain value pool balance&#8221; in this document is to be
interpreted as described in § 4.17 ‘Chain Value Pool Balances’.
<a href="#fn:6" id="fnref:6" title="see footnote" class="footnote"><sup>6</sup></a></p>

<h1 id="abstract"><span class="section-heading">Abstract</span><span class="section-anchor"> <a rel="bookmark" href="#abstract"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h1>

<p>This proposal disables the ability to add new value to the transparent chain
value pool balance. This takes a step toward being able to remove the
transparent protocol, thus reducing the overall complexity and attack surface
of Zcash and increasing user privacy without causing the loss of users' funds.</p>

<h1 id="motivation"><span class="section-heading">Motivation</span><span class="section-anchor"> <a rel="bookmark" href="#motivation"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h1>

<p>There are three separate major motivations for this ZIP:</p>

<ul>
<li><p>Since Zcash is a private blockchain, user expectations of privacy are better
protected by deprecating the transparent pool, which is not private.</p></li>
<li><p>At the launch of the Zcash network, two payment protocols were supported:
the Sprout shielded protocol, which was relatively closely based on
the original Zerocash proposal <a href="#fn:7" id="fnref:7" title="see footnote" class="footnote"><sup>7</sup></a>, and the transparent protocol
derived from Bitcoin.</p></li>
</ul>

<p>The Sprout shielded protocol was later obsoleted by the Sapling and then
Orchard shielded protocols, which introduced significant efficiency and
functionality improvements for shielded transactions. The transparent protocol
has stayed largely the same.</p>

<p>Removing the ability to add to the transparent chain value pool balance is a
first step toward reducing complexity and potential risk in the overall Zcash
protocol, and reducing potential user confusion about the level of privacy they
obtain from Zcash.</p>

<ul>
<li>The transparent scripting system is too complicated to implement in a zk-SNARK
circuit, which precludes likely approaches to scaling Zcash <a href="#fn:8" id="fnref:8" title="see footnote" class="footnote"><sup>8</sup></a>.</li>
</ul>

<p>This proposal disables adding new value to the transparent chain value pool,
thus requiring funds to be moved over time into the Sapling or Orchard shielded
pools.</p>

<p>The implication of this is that when coinbase outputs (miner subsidy, fees, and
funding stream outputs) are shielded, they cannot later be unshielded, which
will have the effect of increasing the total proportion of funds held in shielded
pools relative to the transparent pool.</p>

<h1 id="specification"><span class="section-heading">Specification</span><span class="section-anchor"> <a rel="bookmark" href="#specification"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h1>

<p>Define the <em>total transparent input value</em> of a transaction as follows:</p>

<ul>
<li>if it is a coinbase transaction, its total input value as defined in § 7.1.2
‘Transaction Consensus Rules’ <a href="#fn:9" id="fnref:9" title="see footnote" class="footnote"><sup>9</sup></a>;</li>
<li>otherwise, the total value of its transparent inputs.</li>
</ul>

<p>Consensus rule: The total value of transparent outputs in a transaction MUST be
less than or equal to its total transparent input value.</p>

<p>Note: The facility to send to transparent addresses, and/or to give out transparent
addresses on which funds can be received, has always been OPTIONAL for a particular
Zcash wallet implementation.</p>

<h1 id="rationale"><span class="section-heading">Rationale</span><span class="section-anchor"> <a rel="bookmark" href="#rationale"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h1>

<p>The implication of this is that when coinbase outputs (miner subsidy, fees, and
funding stream outputs) are shielded, they cannot later be unshielded, which
will have the effect of increasing the total proportion of funds held in shielded
pools relative to the transparent pool.</p>

<p>The code changes needed are very small and simple, and their security is easy to
analyse.</p>

<p>This ZIP is similar to ZIP 211 <a href="#fn:10" id="fnref:10" title="see footnote" class="footnote"><sup>10</sup></a> in that it disallows new funds to be
added to the transparent chain value pool balance as ZIP 211 disallowed new funds
to be added to the Sprout chain value pool balance. The consensus rule does not
take the same form because there is no field corresponding to <code>vpub_old</code> for the
transparent protocol.</p>

<p>Rejected alternatives:</p>

<ul>
<li>Disallow all transparent outputs (this implies the proposed rule).</li>
<li>Allow at most a single transparent output per transaction in addition to
the proposed rule.</li>
</ul>

<p>These were rejected as they seem too impractical at the time of this writing.
In particular, exchanges that need to use the transparent pool for regulatory
reasons would likely need to delist Zcash, and the ecosystem of decentralized
exchanges that support Zcash is insufficiently established to replace the role
that centralized exchanges play today.</p>

<h1 id="securityandprivacyconsiderations"><span class="section-heading">Security and Privacy Considerations</span><span class="section-anchor"> <a rel="bookmark" href="#securityandprivacyconsiderations"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h1>

<p>The security motivations for making this change are described in the Motivation section.
Privacy concerns that led to the current design are discussed in the Rationale section.</p>

<p>Since all clients MUST change their behaviour at the same time from this proposal&#8217;s activation
height, there is no additional client distinguisher.</p>

<h1 id="deployment"><span class="section-heading">Deployment</span><span class="section-anchor"> <a rel="bookmark" href="#deployment"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h1>

<p>This ZIP is not currently proposed to activate in a specific network upgrade.</p>

<h1 id="referenceimplementation"><span class="section-heading">Reference Implementation</span><span class="section-anchor"> <a rel="bookmark" href="#referenceimplementation"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h1>

<p>TODO</p>

<h1 id="references"><span class="section-heading">References</span><span class="section-anchor"> <a rel="bookmark" href="#references"><img width="24" height="24" class="section-anchor" src="assets/images/section-anchor.png" alt=""></a></span></h1>

<div class="footnotes">
<hr />
<ol>

<li id="fn:1">
<p><a href="https://www.rfc-editor.org/info/bcp14">Information on BCP 14 — &#8220;RFC 2119: Key words for use in RFCs to Indicate Requirement Levels&#8221; and &#8220;RFC 8174: Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words&#8221;</a> <a href="#fnref:1" title="return to body" class="reversefootnote">&#160;&#8617;&#xfe0e;</a></p>
</li>

<li id="fn:2">
<p><a href="zip-0200">ZIP 200: Network Upgrade Mechanism</a> <a href="#fnref:2" title="return to body" class="reversefootnote">&#160;&#8617;&#xfe0e;</a></p>
</li>

<li id="fn:3">
<p><a href="protocol/protocol.pdf">Zcash Protocol Specification, Version 2025.6.1 [NU6.1] or later</a> <a href="#fnref:3" title="return to body" class="reversefootnote">&#160;&#8617;&#xfe0e;</a></p>
</li>

<li id="fn:4">
<p><a href="zip-0205">ZIP 205: Deployment of the Sapling Network Upgrade</a> <a href="#fnref:4" title="return to body" class="reversefootnote">&#160;&#8617;&#xfe0e;</a></p>
</li>

<li id="fn:5">
<p><a href="zip-0252">ZIP 252: Deployment of the NU5 Network Upgrade</a> <a href="#fnref:5" title="return to body" class="reversefootnote">&#160;&#8617;&#xfe0e;</a></p>
</li>

<li id="fn:6">
<p><a href="protocol/protocol.pdf#chainvaluepoolbalances">Zcash Protocol Specification, Version 2025.6.1 [NU6.1]. Section 4.17: Chain Value Pool Balances</a> <a href="#fnref:6" title="return to body" class="reversefootnote">&#160;&#8617;&#xfe0e;</a></p>
</li>

<li id="fn:7">
<p><a href="https://eprint.iacr.org/2014/349">Zerocash: Decentralized Anonymous Payments from Bitcoin (extended version)</a> <a href="#fnref:7" title="return to body" class="reversefootnote">&#160;&#8617;&#xfe0e;</a></p>
</li>

<li id="fn:8">
<p><a href="https://seanbowe.com/blog/tachyon-scaling-zcash-oblivious-synchronization/">Tachyon: Scaling Zcash with Oblivious Synchronization</a> <a href="#fnref:8" title="return to body" class="reversefootnote">&#160;&#8617;&#xfe0e;</a></p>
</li>

<li id="fn:9">
<p><a href="protocol/protocol.pdf#txnconsensus">Zcash Protocol Specification, Version 2025.6.1 [NU6.1]. Section 7.1.2: Transaction Consensus Rules</a> <a href="#fnref:9" title="return to body" class="reversefootnote">&#160;&#8617;&#xfe0e;</a></p>
</li>

<li id="fn:10">
<p><a href="zip-0211">ZIP 211: Disabling Addition of New Value to the Sprout Chain Value Pool</a> <a href="#fnref:10" title="return to body" class="reversefootnote">&#160;&#8617;&#xfe0e;</a></p>
</li>

</ol>
</div>
</body>
</html>
